<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phaser Game with Images</title>
    <style>
        canvas {
            background-color: #000;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            backgroundColor: '#f0f0f0',
            physics: {
                default: 'arcade',
                arcade: {
                    debug: false
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        const game = new Phaser.Game(config);

        let hueveraBlanca, hueveraMarron, hueveraOro;
        let huevoBlanco, huevoMarron, huevoOro;
        let eggShadow;

        function preload() {
            /*Imágenes no funcionales por la ruta*/
            this.load.image('hueveraBlanca', 'huevos/huevera.png');
            this.load.image('hueveraMarron', 'huevos/huevera.png');
            this.load.image('HueveraOro', 'huevos/huevera.png');
            this.load.image('eggShadow', 'huevos/huevera.png');

            this.load.image('huevoBlanco', 'huevos/huevo.png');
            this.load.image('huevoMarron', 'huevos/huevo.png');
            this.load.image('huevoOro', 'huevos/huevo.png');
        }

        function create() {
            /*Creamos los objetos en las posiciones que queremos pero tenemos que no usar magicNumbers*/
            hueveraBlanca = this.add.image(100, 100, 'hueveraBlanca');
            hueveraMarron = this.add.image(100, 200, 'hueveraMarron');
            hueveraOro = this.add.image(100, 300, 'HueveraOro');
            eggShadow = this.add.image(10000, 10000, 'HueveraOro');

            huevoBlanco = this.add.image(500, 100, 'huevoBlanco');
            huevoMarron = this.add.image(600, 100, 'huevoMarron');
            huevoOro = this.add.image(700, 100, 'huevoOro');
            /*Hacemos a los huevos interactivos*/
            huevoBlanco.setInteractive({draggable: true});
            huevoMarron.setInteractive({draggable: true});
            huevoOro.setInteractive({draggable: true});
            /*En caso de que los huevos estén clicados su tamaño incrementa un 30 por ciento*/
            huevoBlanco.on('pointerdown', function () {
                console.log('Huevo clickeado: Blanco');
                this.setScale(1.3);
            });

            huevoMarron.on('pointerdown', function () {
                console.log('Huevo clickeado: Marron');
                this.setScale(1.3);
            });

            huevoOro.on('pointerdown', function () {
                console.log('Huevo clickeado: Oro');
                this.setScale(1.3);
            });

            this.input.on('drag', function (pointer, object, x, y) {
                object.x = x;
                object.y = y;
                eggShadow.x = x +8;
                eggShadow.y = y +8;
              
            });
            /*En caso de que soltemos los objetos, el tamaño reduce un 30 por ciento*/
            this.input.on('dragend', function (pointer, object, x, y) {
                object.setScale(1);
                eggShadow.x = 10000;
                eggShadow.y = 10000;
                
                
                if (object === huevoBlanco) {
                    /*Le preguntamos con la funcion nueva, si la distancia de los dos objetos coincide por menos de 50 px*/
                    if (Phaser.Math.Distance.Between(huevoBlanco.x, huevoBlanco.y, hueveraBlanca.x, hueveraBlanca.y) < 50) {
                        console.log('Has acertado con el huevo blanco');
                    } else {
                        console.log('Has fallado con el huevo blanco');
                    }
                }
                if (object === huevoMarron) {
                    if (Phaser.Math.Distance.Between(huevoMarron.x, huevoMarron.y, hueveraMarron.x, hueveraMarron.y) < 50) {
                        console.log('Has acertado con el huevo marron');
                    } else {
                        console.log('Has fallado con el huevo marron');
                    }
                }
                if (object === huevoOro) {
                    if (Phaser.Math.Distance.Between(huevoOro.x, huevoOro.y, hueveraOro.x, hueveraOro.y) < 50) {
                        console.log('Has acertado con el huevo oro');
                    } else {
                        console.log('Has fallado con el huevo oro');
                    }
                }
            });
        }

        function update() {
        }
    </script>
</body>
</html>
